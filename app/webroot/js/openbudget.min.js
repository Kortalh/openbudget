/*! OpenBudget 05-24-2014 */
window.Chart=function(a,b){function c(){for(var a=0,c=0,d=0;d<b.dataSets.length;d++)for(var e=0;e<b.dataSets[d].data.length;e++)b.dataSets[d].data[e]>c&&(c=b.dataSets[d].data[e]);a=c;for(var f=0;f<b.dataSets.length;f++)for(var g=0;g<b.dataSets[f].data.length;g++)b.dataSets[f].data[g]<a&&null!==b.dataSets[f].data[g]&&(a=b.dataSets[f].data[g]);c+=c%t,a-=a%t,0>a&&(a=0);var h=c-a;return{min:a,max:c,offset:h}}function d(){return b.labels.length-1}function e(){return Math.ceil(c().offset/t)}function f(a){return(s-r)/d()*a}function g(a){return(q-p)/e()*a}function h(a){return Math.ceil(a*(q-p)/c().offset)}var i=this,j=a.canvas.width=1200,k=a.canvas.height=600,l=30,m=20,n=25,o=25,p=n,q=k-o,r=l,s=j-m,t=5;i.drawBorder=function(b){a.strokeStyle="rgba(0,0,0,0.5)",a.lineWidth=2,a.beginPath(),a.moveTo(s,q),a.lineTo(r,q),a.lineTo(r,p),b&&(a.lineTo(s,p),a.lineTo(s,s)),a.stroke()},i.drawGrid=function(){a.strokeStyle="rgba(150,150,150,0.2)",a.lineWidth=1,a.beginPath();for(var d=1;d<b.labels.length-1;d++)a.moveTo(r+f(d),p),a.lineTo(r+f(d),q);for(var e=1;e<c().max/t;e++)a.moveTo(r,q-g(e)),a.lineTo(s,q-g(e));a.stroke()},i.drawLabels=function(){a.textAlign="center";for(var d=0;d<b.labels.length;d++)a.fillText(b.labels[d],r+f(d),q+20);a.textAlign="right",a.textBaseLine="middle";for(var e=0;e<=c().max;e++)a.fillText(e*t+c().min,r-10,3+q-g(e))},i.drawLines=function(){a.lineWidth=3;for(var d=0;d<b.dataSets.length;d++){a.beginPath(),a.strokeStyle=b.dataSets[d].strokeColor,a.fillStyle=b.dataSets[d].fillColor;for(var e=0;e<b.dataSets[d].data.length;e++)null!==b.dataSets[d].data[e]&&(0===e?a.moveTo(r+f(e),q-h(b.dataSets[d].data[e]-c().min)):a.lineTo(r+f(e),q-h(b.dataSets[d].data[e]-c().min)),lastHadValue=e);a.stroke(),a.lineTo(r+f(lastHadValue),q),a.lineTo(r,q),a.lineTo(r,q-h(b.dataSets[d].data[0])),a.fill()}},i.drawPoints=function(){for(var d=0;d<b.dataSets.length;d++){a.strokeStyle=b.dataSets[d].pointStroke,a.fillStyle=b.dataSets[d].pointColor,a.lineWidth=1;for(var e=0;e<b.dataSets[d].data.length;e++)null!==b.dataSets[d].data[e]&&(a.beginPath(),a.arc(r+f(e),q-h(b.dataSets[d].data[e]-c().min),4,0,2*Math.PI),a.fill(),a.stroke())}},i.drawAll=function(){i.drawBorder(),i.drawGrid(),i.drawLabels(),i.drawLines(),i.drawPoints()}};